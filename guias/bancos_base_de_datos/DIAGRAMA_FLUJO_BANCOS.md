# üìä Diagrama del Sistema de Creaci√≥n de Bancos

## Flujo de Usuario

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    USUARIO ABRE add-bench.html               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ  P√°gina de Crear Nuevo Banco   ‚îÇ
           ‚îÇ  ‚úì Campo nombre                ‚îÇ
           ‚îÇ  ‚úì Campo descripci√≥n           ‚îÇ
           ‚îÇ  ‚úì Selector foto (opcional)    ‚îÇ
           ‚îÇ  ‚úì 4 Sliders (vistas, etc)     ‚îÇ
           ‚îÇ  ‚úì Ubicaci√≥n (auto GPS)        ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Usuario selecciona foto (opt)     ‚îÇ
        ‚îÇ  ‚Ä¢ Validar formato (JPG/PNG/...)  ‚îÇ
        ‚îÇ  ‚Ä¢ Validar tama√±o (max 5MB)        ‚îÇ
        ‚îÇ  ‚Ä¢ Mostrar preview                 ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Usuario ajusta sliders (1-5)     ‚îÇ
        ‚îÇ  ‚Ä¢ Vistas (paisaje)                ‚îÇ
        ‚îÇ  ‚Ä¢ Privacidad                      ‚îÇ
        ‚îÇ  ‚Ä¢ Comodidad                       ‚îÇ
        ‚îÇ  ‚Ä¢ Atm√≥sfera                       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Usuario hace clic en              ‚îÇ
        ‚îÇ  "Publicar Banco"                  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  VALIDAR DATOS                     ‚îÇ
        ‚îÇ  ‚úì Nombre no vac√≠o                 ‚îÇ
        ‚îÇ  ‚úì Ubicaci√≥n v√°lida                ‚îÇ
        ‚îÇ  Si error ‚Üí mostrar alerta         ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ               ‚îÇ
        ERROR      ‚îÇ      ‚úì        ‚îÇ OK
        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫             ‚îÇ
        (Cancelar)   ‚ñº
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ  GUARDAR BANCO EN FIRESTORE      ‚îÇ
                   ‚îÇ  1. Crear documento en "Bancos"  ‚îÇ
                   ‚îÇ  2. Campos: nombre, ratings, etc ‚îÇ
                   ‚îÇ  3. Obtener ID del documento     ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ ¬øHay foto?         ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò
                                  ‚îÇ          ‚îÇ
                            NO    ‚îÇ          ‚îÇ S√ç
                                  ‚îÇ          ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ  FIN   ‚îÇ    ‚îÇ SUBIR FOTO A   ‚îÇ
                            ‚îÇ        ‚îÇ    ‚îÇ FIREBASE       ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ STORAGE        ‚îÇ
                                          ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                            ‚îÇ
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ OBTENER URL      ‚îÇ
                                    ‚îÇ P√öBLICA          ‚îÇ
                                    ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ
                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                ‚îÇ ACTUALIZAR BANCO   ‚îÇ
                                ‚îÇ CON fotoURL        ‚îÇ
                                ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                  ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ ‚úÖ √âXITO           ‚îÇ
                            ‚îÇ Mostrar mensaje    ‚îÇ
                            ‚îÇ "¬°Guardado!"       ‚îÇ
                            ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ Redirigir a        ‚îÇ
                        ‚îÇ map.html           ‚îÇ
                        ‚îÇ (mostrar nuevo     ‚îÇ
                        ‚îÇ banco en el mapa)  ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Arquitectura de Datos

```
BENCHIFY APP
‚îÇ
‚îú‚îÄ index.html ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           ‚îÇ
‚îú‚îÄ src/pages/              ‚îÇ
‚îÇ  ‚îú‚îÄ add-bench.html ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ (Crear banco)
‚îÇ  ‚îú‚îÄ map.html              ‚îÇ (Ver todos)
‚îÇ  ‚îú‚îÄ favorites.html        ‚îÇ (Favoritos)
‚îÇ  ‚îî‚îÄ bench-card.html ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ (Detalle)
‚îÇ
‚îú‚îÄ src/js/                 ‚îÇ
‚îÇ  ‚îú‚îÄ database.js ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îÇ  ‚îú‚îÄ saveBench()
‚îÇ  ‚îÇ  ‚îú‚îÄ uploadBenchPhoto()
‚îÇ  ‚îÇ  ‚îú‚îÄ updateBench()
‚îÇ  ‚îÇ  ‚îî‚îÄ getAllBenches()
‚îÇ  ‚îú‚îÄ auth.js
‚îÇ  ‚îú‚îÄ maps.js
‚îÇ  ‚îî‚îÄ ...
‚îÇ
‚îî‚îÄ src/assets/css/
   ‚îú‚îÄ add-bench.css ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îú‚îÄ styles.css
   ‚îî‚îÄ ...

FIREBASE (Cloud)
‚îÇ
‚îú‚îÄ Firestore Database
‚îÇ  ‚îî‚îÄ Bancos (colecci√≥n)
‚îÇ     ‚îú‚îÄ doc_001
‚îÇ     ‚îÇ  ‚îú‚îÄ nombre
‚îÇ     ‚îÇ  ‚îú‚îÄ descripcion
‚îÇ     ‚îÇ  ‚îú‚îÄ coordenadas: {lat, lng}
‚îÇ     ‚îÇ  ‚îú‚îÄ ratings: {vistas, privacidad, comodidad, atmosfera}
‚îÇ     ‚îÇ  ‚îú‚îÄ fotoURL (opcional)
‚îÇ     ‚îÇ  ‚îú‚îÄ etiquetas
‚îÇ     ‚îÇ  ‚îú‚îÄ userId
‚îÇ     ‚îÇ  ‚îî‚îÄ fecha_creacion
‚îÇ     ‚îî‚îÄ doc_002, doc_003, ...
‚îÇ
‚îî‚îÄ Storage
   ‚îî‚îÄ bancos/
      ‚îú‚îÄ doc_001/
      ‚îÇ  ‚îî‚îÄ foto-1702123456789.jpg
      ‚îî‚îÄ doc_002/
         ‚îî‚îÄ foto-1702234567890.png
```

---

## Ciclo de Vida de un Banco

### Fase 1: Creaci√≥n (add-bench.html)
```
[Usuario rellena formulario]
                ‚îÇ
                ‚ñº
        [Validar datos]
                ‚îÇ
                ‚ñº
        [saveBench()] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Firestore
                             (Banco guardado)
```

### Fase 2: Subida de Foto (opcional)
```
[uploadBenchPhoto()]
        ‚îÇ
        ‚îú‚îÄ Validar archivo
        ‚îú‚îÄ Subir a Storage
        ‚îú‚îÄ Obtener URL p√∫blica
        ‚îÇ
        ‚ñº
[updateBench()] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Firestore
                       (Actualizar fotoURL)
```

### Fase 3: Visualizaci√≥n (map.html)
```
[getAllBenches()]
        ‚îÇ
        ‚ñº
[Leer todos de Firestore]
        ‚îÇ
        ‚ñº
[Renderizar pins en mapa]
        ‚îÇ
        ‚ñº
[Usuario ve banco creado]
```

### Fase 4: Interacci√≥n (bench-card.html)
```
[Usuario hace clic en pin]
        ‚îÇ
        ‚ñº
[Mostrar detalle del banco]
‚îú‚îÄ Foto (si existe)
‚îú‚îÄ Ratings con estrellas
‚îú‚îÄ Descripci√≥n
‚îú‚îÄ Bot√≥n "A√±adir a favoritos"
‚îî‚îÄ Compartir en redes
```

---

## Validaciones

```javascript
// add-bench.html - JavaScript

‚úì Validaci√≥n de Nombre
  ‚îú‚îÄ Requerido
  ‚îú‚îÄ No puede ser solo espacios
  ‚îî‚îÄ M√°ximo 100 caracteres

‚úì Validaci√≥n de Foto
  ‚îú‚îÄ Tipo: image/jpeg, image/png, image/webp, image/gif
  ‚îú‚îÄ Tama√±o: m√°ximo 5MB
  ‚îî‚îÄ Retornar error antes de subir

‚úì Validaci√≥n de Sliders
  ‚îú‚îÄ Rango: 1-5
  ‚îú‚îÄ Tipo: number
  ‚îî‚îÄ Todos requeridos

‚úì Validaci√≥n de Ubicaci√≥n
  ‚îú‚îÄ Latitud v√°lida (-90 a 90)
  ‚îú‚îÄ Longitud v√°lida (-180 a 180)
  ‚îî‚îÄ Por defecto: Madrid (40.4167, -3.7037)
```

---

## Base de Datos - Ejemplo Real

### Documento creado en Firestore

```json
{
  "id": "KxH2jQ8mPn3fL1vY4zZ",
  "nombre": "El Banco de los Suspiros",
  "descripcion": "El lugar perfecto para propuestas de matrimonio. Ubicado en el parque central, ofrece vistas hermosas del atardecer.",
  "coordenadas": {
    "lat": 40.4521,
    "lng": -3.6891
  },
  "ratings": {
    "vistas": 5,
    "privacidad": 4,
    "comodidad": 5,
    "atmosfera": 5
  },
  "fotoURL": "https://firebasestorage.googleapis.com/v0/b/benchify-86edd.appspot.com/o/bancos%2FKxH2jQ8mPn3fL1vY4zZ%2Ffoto-1702123456789.jpg?alt=media&token=AbCdEfGhIjKlMnOpQrStUvWxYz",
  "etiquetas": ["Nuevo", "Rom√°ntico"],
  "userId": "anonimo",
  "fecha_creacion": {
    "_seconds": 1702123456,
    "_nanoseconds": 789000000
  },
  "fecha_actualizacion": null
}
```

---

## Estad√≠sticas de Almacenamiento

```
Total Bencos: 10
‚îú‚îÄ Con foto: 7
‚îÇ  ‚îú‚îÄ JPG: 5 (media 2.3 MB)
‚îÇ  ‚îî‚îÄ PNG: 2 (media 1.8 MB)
‚îî‚îÄ Sin foto: 3

Storage usado: ~15.6 MB
Database usado: ~45 KB (muy peque√±o)
```

---

## Flujo de Errores

```javascript
// En add-bench.html

addEventListener('submit', async (e) => {
  try {
    // Crear banco
    const benchId = await saveBench(benchData);
    
    // Subir foto
    if (selectedPhotoFile) {
      const url = await uploadBenchPhoto(file, benchId);
      
      // Actualizar con URL
      await updateBench(benchId, { fotoURL: url });
    }
    
    // ‚úÖ √âxito
    alert('‚úÖ Banco publicado');
    
  } catch (error) {
    // ‚ùå Error
    console.error(error);
    alert('‚ùå Error: ' + error.message);
    // Restaurar bot√≥n
    btn.disabled = false;
  }
});
```

---

## Integraci√≥n con otras p√°ginas

### map.html
```javascript
import { getAllBenches } from '../js/database.js';

async function cargarBancos() {
  const bancos = await getAllBenches();
  
  bancos.forEach(banco => {
    // Crear pin en mapa
    L.marker([banco.coordenadas.lat, banco.coordenadas.lng])
      .bindPopup(`
        <h3>${banco.nombre}</h3>
        <p>‚≠ê ${banco.ratings.atmosfera}/5</p>
        <a href="bench-card.html?id=${banco.id}">Ver detalle</a>
      `)
      .addTo(map);
  });
}
```

### b2b-stats.html
```javascript
import { getAllBenches } from '../js/database.js';

async function actualizarEstadisticas() {
  const bancos = await getAllBenches();
  
  // Actualizar card
  document.querySelector('[data-stat="bancos-totales"]')
    .textContent = bancos.length;
  
  // Rating promedio
  const ratingPromedio = bancos.reduce((sum, b) => 
    sum + (b.ratings.vistas + b.ratings.privacidad + 
           b.ratings.comodidad + b.ratings.atmosfera) / 4, 0) / bancos.length;
  
  document.querySelector('[data-stat="rating-promedio"]')
    .textContent = ratingPromedio.toFixed(1);
}
```

---

**Diagrama creado:** Diciembre 2024
**Componentes:** add-bench.html, database.js, Firebase Firestore, Firebase Storage
